<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Pink Diary üíñ</title>
    <style>
        /* Pinkish girly theme */
        body {
            background-color: #ffd1dc; /* Soft pink */
            font-family: 'Comic Sans MS', cursive, sans-serif;
            color: #333;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
        }

        header {
            text-align: center;
            padding: 20px;
            background-color: #ff69b4; /* Hot pink */
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            animation: bounceIn 1s ease-in-out;
        }

        h1 {
            margin: 0;
            font-size: 2.5em;
        }

        #new-entry {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.5s ease-in;
        }

        input[type="date"], input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 2px solid #ff69b4;
            border-radius: 5px;
            font-family: inherit;
            box-sizing: border-box;
        }

        textarea {
            height: 200px;
            resize: vertical;
        }

        button {
            background-color: #ff69b4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s, transform 0.3s;
        }

        button:hover {
            background-color: #ff1493; /* Deeper pink */
            transform: scale(1.05);
        }

        #entries {
            max-width: 800px;
            margin: 20px auto;
        }

        .entry {
            background-color: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            animation: slideIn 0.5s ease-in-out;
            position: relative;
        }

        .entry h3 {
            margin: 0 0 10px;
            color: #ff69b4;
        }

        .entry p {
            margin: 5px 0;
        }

        .entry .date {
            font-style: italic;
            color: #888;
        }

        .entry .edit-btn, .entry .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            margin-left: 10px;
        }

        .entry .edit-btn:hover, .entry .delete-btn:hover {
            color: #ff1493;
        }

        #search {
            max-width: 600px;
            margin: 20px auto;
            text-align: center;
        }

        #search-input {
            width: 70%;
            padding: 10px;
            border: 2px solid #ff69b4;
            border-radius: 5px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounceIn {
            0% { transform: scale(0.9); opacity: 0; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Mood selector */
        #mood-selector {
            display: flex;
            justify-content: space-around;
            margin: 10px 0;
        }

        .mood {
            font-size: 2em;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .mood.selected {
            transform: scale(1.2);
        }

        .mood:hover {
            transform: scale(1.2);
        }
    </style>
</head>
<body>
    <header>
        <h1>My Pink Diary üíñ</h1>
    </header>

    <section id="new-entry">
        <input type="date" id="entry-date" required>
        <input type="text" id="entry-title" placeholder="Title of today's entry..." required>
        <div id="mood-selector">
            <span class="mood" data-mood="happy">üòä</span>
            <span class="mood" data-mood="sad">üò¢</span>
            <span class="mood" data-mood="excited">ü§©</span>
            <span class="mood" data-mood="angry">üò†</span>
            <span class="mood" data-mood="relaxed">üòå</span>
        </div>
        <textarea id="entry-content" placeholder="Write about your day..."></textarea>
        <button id="save-btn">Save Entry ‚ú®</button>
    </section>

    <section id="search">
        <input type="text" id="search-input" placeholder="Search entries...">
    </section>

    <section id="entries">
        <!-- Entries will be loaded here -->
    </section>

    <script>
        let entries = JSON.parse(localStorage.getItem('diaryEntries')) || [];
        let selectedMood = '';
        let editingIndex = -1;

        // Load entries on page load
        window.addEventListener('load', displayEntries);

        // Mood selection
        const moods = document.querySelectorAll('.mood');
        moods.forEach(mood => {
            mood.addEventListener('click', () => {
                moods.forEach(m => m.classList.remove('selected'));
                mood.classList.add('selected');
                selectedMood = mood.dataset.mood;
            });
        });

        // Save button
        document.getElementById('save-btn').addEventListener('click', saveEntry);

        // Search input
        document.getElementById('search-input').addEventListener('input', displayEntries);

        function saveEntry() {
            const date = document.getElementById('entry-date').value;
            const title = document.getElementById('entry-title').value;
            const content = document.getElementById('entry-content').value;

            if (!date || !title || !content) {
                alert('Please fill in all fields!');
                return;
            }

            const entry = { date, title, content, mood: selectedMood };

            if (editingIndex >= 0) {
                entries[editingIndex] = entry;
                editingIndex = -1;
                document.getElementById('save-btn').textContent = 'Save Entry ‚ú®';
            } else {
                entries.push(entry);
            }

            localStorage.setItem('diaryEntries', JSON.stringify(entries));
            displayEntries();
            clearForm();
        }

        function displayEntries() {
            const entriesContainer = document.getElementById('entries');
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            entriesContainer.innerHTML = '';

            const filteredEntries = entries.filter(entry => 
                entry.title.toLowerCase().includes(searchTerm) || 
                entry.content.toLowerCase().includes(searchTerm) ||
                entry.date.includes(searchTerm)
            );

            filteredEntries.sort((a, b) => new Date(b.date) - new Date(a.date)); // Sort by date descending

            filteredEntries.forEach((entry, index) => {
                const entryDiv = document.createElement('div');
                entryDiv.classList.add('entry');
                entryDiv.innerHTML = `
                    <h3>${entry.title} ${entry.mood ? `<span class="mood">${getMoodEmoji(entry.mood)}</span>` : ''}</h3>
                    <p class="date">${entry.date}</p>
                    <p>${entry.content}</p>
                    <button class="edit-btn" onclick="editEntry(${index})">‚úèÔ∏è</button>
                    <button class="delete-btn" onclick="deleteEntry(${index})">üóëÔ∏è</button>
                `;
                entriesContainer.appendChild(entryDiv);
            });
        }

        function getMoodEmoji(mood) {
            const emojis = {
                happy: 'üòä',
                sad: 'üò¢',
                excited: 'ü§©',
                angry: 'üò†',
                relaxed: 'üòå'
            };
            return emojis[mood] || '';
        }

        function editEntry(index) {
            const entry = entries[index];
            document.getElementById('entry-date').value = entry.date;
            document.getElementById('entry-title').value = entry.title;
            document.getElementById('entry-content').value = entry.content;
            selectedMood = entry.mood;
            moods.forEach(m => {
                if (m.dataset.mood === selectedMood) m.classList.add('selected');
                else m.classList.remove('selected');
            });
            editingIndex = index;
            document.getElementById('save-btn').textContent = 'Update Entry ‚ú®';
        }

        function deleteEntry(index) {
            if (confirm('Are you sure you want to delete this entry?')) {
                entries.splice(index, 1);
                localStorage.setItem('diaryEntries', JSON.stringify(entries));
                displayEntries();
            }
        }

        function clearForm() {
            document.getElementById('entry-date').value = '';
            document.getElementById('entry-title').value = '';
            document.getElementById('entry-content').value = '';
            selectedMood = '';
            moods.forEach(m => m.classList.remove('selected'));
        }

        // Auto-save progress (draft) every 10 seconds if content is being typed
        let draftTimer;
        document.getElementById('entry-content').addEventListener('input', () => {
            clearTimeout(draftTimer);
            draftTimer = setTimeout(() => {
                const draft = {
                    date: document.getElementById('entry-date').value,
                    title: document.getElementById('entry-title').value,
                    content: document.getElementById('entry-content').value,
                    mood: selectedMood
                };
                localStorage.setItem('diaryDraft', JSON.stringify(draft));
            }, 10000);
        });

        // Load draft if exists
        const draft = JSON.parse(localStorage.getItem('diaryDraft'));
        if (draft) {
            document.getElementById('entry-date').value = draft.date || '';
            document.getElementById('entry-title').value = draft.title || '';
            document.getElementById('entry-content').value = draft.content || '';
            selectedMood = draft.mood || '';
            moods.forEach(m => {
                if (m.dataset.mood === selectedMood) m.classList.add('selected');
            });
        }

        // Clear draft on save
        const originalSave = saveEntry;
        saveEntry = () => {
            originalSave();
            localStorage.removeItem('diaryDraft');
        };
    </script>
</body>
</html>